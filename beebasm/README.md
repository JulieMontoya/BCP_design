# Files for the new BeebAsm build system #

BCP is now a BeebAsm project, although it is still intended to maintain a native BBC-compatible build process as a secondary objective.  (Otherwise, it's not
really a BBC project at all, but a PC project with a specialised toolchain and runtime.)

## To Build the Latest Version ##
For the desperately impatient:
```
$ nano bcp_main.6502 #    comment where indicated
$ beebasm -i bcp_main.6502 -di bbcpcb111_nocode.ssd -do bbcpcb111.ssd -v > bcp_main.log
```
Then mount and boot `bbcpcb111.ssd` in a BBC Emulator, or transfer the disc image to a real floppy disc and boot in a real BBC Micro.

## bcp_main.6502 ##
This assembler file `INCLUDE`s each section of code, and `SAVE`s the assembled binary to a disc image.  

## WKS02SC.6502 ##
Variable definitions for zero page and main workspace locations and OS call entry points.

## MTH11SC.6502 ##
The mathematics library.  As of version 11, this includes what it is to be hoped should be a fairly static jump table, with jumps into the code from entry points that will not change from version to version.

## DBM57SC.6502 ##
The database manager.  As of version 57, this sits above the graphics subroutines; the maths and database code are sufficient in themselves to run the utilities disc programs.  This includes subroutines for parsing input, packing and retrieving parts, pins and vertices of routed tracks, and for `*LOAD`ing and `*SAVE`ing the database contents.

## GFX50SC.6502 ##
The graphics library.  This provides subroutines used by the design application to draw component pads and silkscreen outlines and routed tracks on the screen.  As of version 50  (if not sooner, at least unofficially),  this is not needed by the programs on the utilities disc.

## DES17SC.6502 ##
The design application.  Accepts commands and despatches to the appropriate subroutine to implement actions.  

## bbcpcb111_nocode.ssd ##
This disc image file contains the BASIC loader and a minimal variable dump generated by the target-side build  (needs replacing with one generated on the host before anything changes value)  which can also support `WL2DES2`.  _TO DO: generate a minimal variable dump directly from definitions in assembler source and log files.  This will need doing if workspace addresses change.  Otherwise probably quite safe, as subroutines are called via a  (more or less)  static jump table._

```
$ nano bcp_main.6502 #    comment where indicated
$ beebasm -i bcp_main.6502 -di bbcpcb111_nocode.ssd -do bbcpcb111.ssd -v > bcp_main.log
```

## bbcpcb110_nocode.ssd ##
This disc image file contains the BASIC loader, but none of the files generated by BeebAsm, so it can have the output files added directly to it.

```
$ nano bcp_main.6502 #    comment where indicated
$ beebasm -i bcp_main.6502 -v > bcp_main.log
$ nano bcp_main.6502 #    uncomment where indicated
$ gather_vars -m L.A16VARS -l bcp_main.log -O bcp_main.vars bcp_main.6502
$ beebasm -i bcp_main.6502 -di bbcpcb110_nocode.ssd -do bbcpcb110.ssd
```

## photoplot_main.6502 ##
This file `INCLUDE`s each of the files necessary to build the photoplot program.  This is currently in three parts; the plotting library, a font for generating text on the photoplotter and the menu code.  (It probably will be split up further in future.)
