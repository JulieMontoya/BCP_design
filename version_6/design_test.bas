   10*KEY8*EX.L.MINVARS|MG.100|M
   11PRINT"Don't touch the keyboard yet ..."CHR$21
   20*FX138,0,136
   30END
  100VDU6:IFINKEY-256<0MODE5 ELSEMODE129
  110HIMEM=&3500
  120*L.ALLCODE
  125*K.1G.160|M
  130DIMdata%2048
  140PROCpoke(design,data%):PROCpoke(design+2,data%+&800)
  150PRINT"Enter design filename or *CMD"'"RETURN for catalogue."
  160$cardbuf="L ":PROCget_file(&902)
  170PROCpoke(cbb,&900):?refindex=2:CALLL_cmd
  175$cardbuf="VH":CALLparse_cmd
  180*K.1|LG.11010|M
  190VDU23,224,&EEEE;&EE;&EEEE;&EE;23,226,&7800;&7A0E;&7F02;&2;23,227,&200;&27F;&E7A;&78;
  200VDU23,228,&3E1F;&FF7C;&4422;&00F8;23,229,&3C00;&7E7E;&7E7E;&003C;23,230,&1010;&3F38;&1038;&0010;23,231,&3E77;&3E7F;&3E7F;&7F;
  201VDU23,232,&3800;&707F;&387F;&1010;
  210M%=?&355 AND7
  220IFM%=4 H%=4:!palette=&11010101
  230IFM%=5 H%=8:!palette=&1020301
  240IFM%=1 H%=4:!palette=&1020301
  250IFM%=2 H%=8:!palette=&1030705:palette!8=&7060402
  260GOTO11010
11000VDU26,12
11010VDU28,0,7,160/H%-1,0
11020REPEAT
11030PRINTTAB(0,0);"          ";TAB(0,0);
11040INPUT$cardbuf:U%=USRparse_cmd:IFU%AND&1000000PRINT"** BAD COMMAND **":END
11090UNTILFALSE
11990END
12000DEFPROCget_file(M%):LOCALX%,Y%
12010REPEAT
12020REPEAT
12030INPUT" :"$M%
12040IF?M%=42X%=M%+1:Y%=(M%+1)DIV256:CALL&FFF7
12050UNTIL?M%<>42
12060IF?M%=13THEN*.
12070UNTIL?M%<>13
12080ENDPROC
13000DEFFNpeek(P%)
13010Q%=!P%AND&FFFF:IFQ%>32767Q%=Q%OR&FFFF0000
13020=Q%
13030DEFPROCpoke(P%,Q%)
13040!P%=!P%AND&FFFF0000 OR Q%AND&FFFF
13050ENDPROC
